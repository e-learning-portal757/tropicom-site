{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "À Propos - Tropicom : Votre Partenaire en Solutions Numériques" %}{% endblock %}

{% block content %}

<section class="bg-white py-16 md:py-20 animate-fade-in">
    <div class="container mx-auto px-6 lg:px-8 grid md:grid-cols-2 gap-12 items-center">

        <div class="space-y-6">
            <h1 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold text-blue-900 mb-6 leading-tight">{% trans "Qui sommes-nous ?" %}</h1>
            <p class="text-gray-700 text-lg leading-relaxed">
                {% trans "Spécialisée en informatique et télécoms, " %}
                <strong class="font-bold">
                    <span class="text-blue-700">Tropi</span><span class="text-red-600">com</span>
                </strong>
                {% trans " assure le maintien et la productivité de votre entreprise grâce à un système informatique fluide et efficace." %}
            </p>
            <p class="text-gray-700 text-lg leading-relaxed">
                {% trans "Disposant de techniciens qualifiés et certifiés, nous assurons des solutions complètes et personnalisées, de la conception à la maintenance, adaptées à l'évolution constante de vos besoins." %}
            </p>
            <p class="text-gray-700 text-lg leading-relaxed">
                {% trans "Renforcez votre compétitivité, optimisez vos opérations et sécurisez votre infrastructure avec un partenaire informatique et Télécoms de confiance." %}
            </p>
        </div>

        <div class="overflow-hidden rounded-lg shadow-xl transform transition-transform duration-500 hover:scale-105">
            <img src="{% static 'img/12.jpeg' %}"
                 srcset="{% static 'img/12.jpeg' %} 1x, {% static 'img/12_2x.jpeg' %} 2x" {# Exemple de srcset pour haute résolution #}
                 alt="{% trans 'Équipe Tropicom en réunion, illustrant la collaboration et l’expertise technique.' %}"
                 class="w-full h-auto object-cover lazyload"
                 loading="lazy"
                 width="700" height="467"> {# Spécifier width/height pour éviter le CLS #}
        </div>

    </div>
</section>

<section class="bg-gray-50 py-20 px-6 md:py-24 animate-fade-in">
    <div class="max-w-7xl mx-auto grid md:grid-cols-2 gap-12 items-center">

        <div class="overflow-hidden rounded-xl shadow-lg transform transition-transform duration-500 hover:scale-105">
            <img src="{% static 'img/000000.jpeg' %}"
                 srcset="{% static 'img/74.jpeg' %} 1x, {% static 'img/000000_2x.jpeg' %} 2x" {# Exemple srcset #}
                 alt="{% trans 'Illustration de la mission de Tropicom : une équipe travaillant sur des serveurs, symbolisant la fiabilité et l’innovation.' %}"
                 class="w-full h-full object-cover lazyload"
                 loading="lazy"
                 width="700" height="467"> {# Spécifier width/height #}
        </div>

        <div class="space-y-6">
            <h2 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold text-blue-900 mb-6 leading-tight">{% trans "Notre mission" %}</h2>
            <p class="text-gray-700 text-lg leading-relaxed">
                {% trans "Chez Tropicom, notre mission fondamentale est d’offrir des solutions informatiques de qualité supérieure, parfaitement adaptées aux besoins spécifiques et évolutifs de chaque client. Nous nous engageons fermement à garantir fiabilité, sécurité et innovation dans toutes nos interventions, assurant ainsi la pérennité de vos systèmes." %}
            </p>
            <p class="text-gray-700 text-lg leading-relaxed">
                {% trans "Nous accompagnons les entreprises à chaque étape de leur parcours de transformation numérique, en intervenant avec une expertise reconnue dans des domaines critiques tels que la cybersécurité avancée, la conception et le déploiement d'infrastructures réseaux et télécoms résilientes, et le développement de services digitaux sur mesure." %}
            </p>
        </div>

    </div>
</section>

<section class="relative h-[60vh] md:h-[50vh] overflow-hidden flex items-center justify-center text-white text-center group bg-gray-800">
    <div class="absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110"
         style="background-image: url('{% static 'img/07.jpeg' %}');"
         role="img" aria-label="{% trans 'Arrière-plan thématique sur la technologie et la connectivité.' %}"></div>

    <div class="absolute inset-0 bg-black bg-opacity-70 backdrop-brightness-50"></div> {# Augmenté l'opacité et ajouté un léger flou #}

    <div class="relative z-10 px-4 max-w-4xl mx-auto py-8">
        <h2 class="text-3xl sm:text-5xl lg:text-6xl font-bold mb-4 drop-shadow-lg leading-tight">
            {% trans "Nos domaines d'expertise couvrent 5 pôles clés" %}
        </h2>
        <p class="text-lg sm:text-xl md:text-2xl max-w-2xl mx-auto drop-shadow-md mb-8">
            {% trans "Sécurité électronique, Transformation digitale, Réseaux & Télécoms, Gestion Documentaire et Systèmes Informatiques." %}
        </p>
        <a href="{% url 'vitrine:services' %}"
           class="inline-block bg-blue-600 text-white font-semibold py-3 px-8 rounded-full shadow-lg hover:bg-blue-700 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75">
            {% trans "Découvrez nos services" %}
        </a>
    </div>
</section>

<section class="py-20 bg-gray-100 px-6" id="chiffres-section">
    <div class="max-w-6xl mx-auto text-center">
        <h2 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold text-blue-900 mb-12">{% trans "Tropicom en quelques chiffres" %}</h2>

        <div class="grid grid-cols-1 sm:grid-cols-3 gap-8">

            <div class="bg-white rounded-lg shadow-md p-8 transform transition-transform duration-500 hover:scale-105 flex flex-col items-center justify-center border-b-4 border-blue-600 animated-fade-in" style="animation-delay: 0.1s;">
                <div class="text-blue-700 text-5xl md:text-6xl font-bold mb-2 animated-number" data-target="250" data-duration="2000" data-prefix="+">
                    0
                </div>
                <p class="text-gray-700 font-medium text-lg md:text-xl">{% trans "Clients satisfaits" %}</p>
            </div>

            <div class="bg-white rounded-lg shadow-md p-8 transform transition-transform duration-500 hover:scale-105 flex flex-col items-center justify-center border-b-4 border-blue-600 animated-fade-in" style="animation-delay: 0.3s;">
                <div class="text-blue-700 text-5xl md:text-6xl font-bold mb-2 animated-number" data-target="9" data-duration="1500">
                    0
                </div>
                <p class="text-gray-700 font-medium text-lg md:text-xl">{% trans "ans d’expérience" %}</p>
            </div>

            <div class="bg-white rounded-lg shadow-md p-8 transform transition-transform duration-500 hover:scale-105 flex flex-col items-center justify-center border-b-4 border-blue-600 animated-fade-in" style="animation-delay: 0.5s;">
                <div class="text-blue-700 text-5xl md:text-6xl font-bold mb-2 animated-number" data-target="100" data-duration="1800" data-suffix="%">
                    0
                </div>
                <p class="text-gray-700 font-medium text-lg md:text-xl">{% trans "Taux de réussite" %}</p>
            </div>

        </div>
    </div>
</section>

<style>
    @keyframes fadeInSlideUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Apply initial hidden state and the animation */
    .animated-fade-in {
        opacity: 0; /* Ensures elements are invisible before animation */
        transform: translateY(20px); /* Sets starting position for slide-up effect */
        animation: fadeInSlideUp 0.8s ease-out forwards; /* Apply animation */
    }

    /* Remove specific nth-of-type for 'section' if you're targeting internal divs */
    /* The delays will now be applied via inline style for .animated-fade-in elements */
</style>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Animation des chiffres clés lors du scroll
        const chiffresSection = document.getElementById('chiffres-section');
        const animatedNumbers = document.querySelectorAll('.animated-number');
        const fadeInElements = document.querySelectorAll('.animated-fade-in'); // Select elements to fade in
        let hasAnimatedNumbers = false; // To ensure number animation triggers only once

        // Function to animate a single number counter
        const animateNumber = (element) => {
            const target = parseInt(element.dataset.target);
            const duration = parseInt(element.dataset.duration);
            const prefix = element.dataset.prefix || '';
            const suffix = element.dataset.suffix || ''; // Added suffix support
            const start = 0;
            let startTime = null;

            const step = (timestamp) => {
                if (!startTime) startTime = timestamp;
                const progress = timestamp - startTime;
                const percentage = Math.min(progress / duration, 1);
                const value = Math.floor(percentage * (target - start) + start);

                element.textContent = prefix + value + suffix; // Include suffix

                if (percentage < 1) {
                    requestAnimationFrame(step);
                } else {
                    element.textContent = prefix + target + suffix; // Ensure final value is accurate
                }
            };

            requestAnimationFrame(step);
        };

        // Observer for the 'chiffres-section' to trigger number and fade-in animations
        const chiffresSectionObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    // Trigger number animation only once
                    if (!hasAnimatedNumbers) {
                        animatedNumbers.forEach(num => animateNumber(num));
                        hasAnimatedNumbers = true;
                    }

                    // Trigger fade-in animation for each element with 'animated-fade-in'
                    fadeInElements.forEach(el => {
                        // For elements already in view when DOMContentLoaded fires, their animation might not run
                        // if they are not explicitly removed from observer or styled to animate on intersect
                        // The CSS `forwards` ensures it stays at the end state.
                        // We don't need to manually set opacity/transform here if CSS handles the animation fully
                    });
                    
                    // Unobserve the section once animations are triggered
                    observer.unobserve(entry.target); 
                }
            });
        }, {
            // Adjust threshold based on when you want animations to start (e.g., 0.2 for 20% visible)
            threshold: 0.2 
        });

        if (chiffresSection) {
            chiffresSectionObserver.observe(chiffresSection);
        }

        // --- IMPORTANT NOTE ---
        // The `animated-fade-in` class with `animation: fadeInSlideUp 0.8s ease-out forwards;`
        // and inline `animation-delay` is enough for the fade-in effect.
        // You don't need a separate `sectionObserver` in JavaScript for these if
        // they are already present in the DOM when the `chiffresSectionObserver` fires.
        // The `forwards` keyword in CSS animation ensures the final state persists.
        // If you had *other* sections on the page that *also* needed their own unique fade-in
        // based on their own intersection, then a separate observer would be necessary.
        // For this code, the single `chiffresSectionObserver` is sufficient.
    });
</script>
{% endblock %}