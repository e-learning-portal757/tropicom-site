{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Contact - Tropicom : Solutions Numériques et Télécoms pour Entreprises" %}{% endblock %}

{% block content %}

<section class="py-20 bg-gray-50 px-4">
    <h2 class="text-3xl sm:text-4xl text-center font-bold text-blue-900 mb-12">{% trans "Vos défis numériques, nos solutions efficaces" %}</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 max-w-7xl mx-auto">

        {# Card 1: Outdated Antivirus #}
        <div class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 text-center flex flex-col items-center justify-between">
            <div>
                <h3 class="text-xl font-bold text-red-600 mb-2">{% trans "Antivirus dépassé" %}</h3>
                <p class="text-gray-700 mb-4">{% trans "Votre poste de travail est infecté par un virus, vous empêchant d'accéder à vos fichiers importants." %}</p>
                <p class="text-green-700 font-semibold">{% trans "➡️ Notre solution : Installation d'un antivirus professionnel et nettoyage complet du système." %}</p>
            </div>
            <div class="w-28 h-28 mx-auto mt-6 overflow-hidden rounded-full border-4 border-blue-100 shadow-md group">
                <img src="{% static 'img/81.jpeg' %}" alt="{% trans 'Icône Antivirus' %}" class="w-full h-full object-cover transform group-hover:scale-110 transition duration-500 ease-in-out lazyload" loading="lazy">
            </div>
            <a href="#contact-form"
               class="mt-6 inline-block w-full bg-blue-600 text-white font-semibold py-2 rounded-md hover:bg-blue-700 transition-colors duration-300">
                {% trans "Obtenir de l'aide" %}
            </a>
        </div>

        {# Card 2: Unstable Connection #}
        <div class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 text-center flex flex-col items-center justify-between">
            <div>
                <h3 class="text-xl font-bold text-red-600 mb-2">{% trans "Connexion instable" %}</h3>
                <p class="text-gray-700 mb-4">{% trans "Votre connexion internet est intermittente, rendant le travail quasiment impossible." %}</p>
                <p class="text-green-700 font-semibold">{% trans "➡️ Notre solution : Diagnostic Wi-Fi approfondi et remplacement de votre équipement réseau." %}</p>
            </div>
            <div class="w-28 h-28 mx-auto mt-6 overflow-hidden rounded-full border-4 border-blue-100 shadow-md group">
                <img src="{% static 'img/83.jpeg' %}" alt="{% trans 'Icône Connexion' %}" class="w-full h-full object-cover transform group-hover:scale-110 transition duration-500 ease-in-out lazyload" loading="lazy">
            </div>
            <a href="#contact-form"
               class="mt-6 inline-block w-full bg-blue-600 text-white font-semibold py-2 rounded-md hover:bg-blue-700 transition-colors duration-300">
                {% trans "Obtenir de l'aide" %}
            </a>
        </div>

        {# Card 3: Slow Network #}
        <div class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 text-center flex flex-col items-center justify-between">
            <div>
                <h3 class="text-xl font-bold text-red-600 mb-2">{% trans "Réseau d'entreprise lent" %}</h3>
                <p class="text-gray-700 mb-4">{% trans "Le partage de fichiers et l'accès aux ressources réseau sont excessivement lents." %}</p>
                <p class="text-green-700 font-semibold">{% trans "➡️ Notre solution : Optimisation de votre réseau local (LAN) et réorganisation du câblage." %}</p>
            </div>
            <div class="w-28 h-28 mx-auto mt-6 overflow-hidden rounded-full border-4 border-blue-100 shadow-md group">
                <img src="{% static 'img/84.jpeg' %}" alt="{% trans 'Icône Réseau lent' %}" class="w-full h-full object-cover transform group-hover:scale-110 transition duration-500 ease-in-out lazyload" loading="lazy">
            </div>
            <a href="#contact-form"
               class="mt-6 inline-block w-full bg-blue-600 text-white font-semibold py-2 rounded-md hover:bg-blue-700 transition-colors duration-300">
                {% trans "Obtenir de l'aide" %}
            </a>
        </div>

        {# Card 4: Remote Access Impossible #}
        <div class="bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 text-center flex flex-col items-center justify-between">
            <div>
                <h3 class="text-xl font-bold text-red-600 mb-2">{% trans "Accès distant impossible" %}</h3>
                <p class="text-gray-700 mb-4">{% trans "Vos collaborateurs en télétravail ne peuvent pas se connecter au réseau interne de l'entreprise." %}</p>
                <p class="text-green-700 font-semibold">{% trans "➡️ Notre solution : Mise en œuvre d'un réseau privé virtuel (VPN) sécurisé et performant." %}</p>
            </div>
            <div class="w-28 h-28 mx-auto mt-6 overflow-hidden rounded-full border-4 border-blue-100 shadow-md group">
                <img src="{% static 'img/81.jpeg' %}" alt="{% trans 'Icône VPN' %}" class="w-full h-full object-cover transform group-hover:scale-110 transition duration-500 ease-in-out lazyload" loading="lazy">
            </div>
            <a href="#contact-form"
               class="mt-6 inline-block w-full bg-blue-600 text-white font-semibold py-2 rounded-md hover:bg-blue-700 transition-colors duration-300">
                {% trans "Obtenir de l'aide" %}
            </a>
        </div>

    </div>
</section>


<section id="contact-form" class="py-16 bg-white px-4">
    <div class="max-w-6xl mx-auto">
        <h2 class="text-4xl sm:text-5xl font-extrabold text-center text-blue-700 mb-12">{% trans "Contactez-nous" %}</h2>

        {# Django Messages Display #}
        {% if messages %}
        <div class="mb-8 p-4 rounded-lg">
            <ul class="list-none m-0 p-0">
                {% for message in messages %}
                <li class="p-3 mb-2 rounded-md text-center
                    {% if message.tags == 'success' %}bg-green-100 text-green-700 border border-green-200{% comment %} Green for success {% endcomment %}
                    {% elif message.tags == 'error' %}bg-red-100 text-red-700 border border-red-200{% comment %} Red for error {% endcomment %}
                    {% elif message.tags == 'warning' %}bg-yellow-100 text-yellow-700 border border-yellow-200{% comment %} Yellow for warning {% endcomment %}
                    {% else %}bg-blue-100 text-blue-700 border border-blue-200{% comment %} Blue by default or info {% endcomment %}{% endif %}">
                    {{ message }}
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
            {# Contact Form #}
            <form method="POST" action="{% url 'vitrine:contact' %}" class="space-y-6 bg-gray-50 p-8 rounded-lg shadow-lg">
                {% csrf_token %}
                <div>
                    <label for="nom" class="block text-gray-800 font-semibold mb-2">{% trans "Votre Nom Complet" %}</label>
                    <input type="text" id="nom" name="nom" required
                           class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 transition duration-200 ease-in-out text-gray-900 placeholder-gray-500"
                           placeholder="{% trans 'Ex: Jean Dupont' %}">
                </div>
                <div>
                    <label for="email" class="block text-gray-800 font-semibold mb-2">{% trans "Votre Adresse E-mail Professionnelle" %}</label>
                    <input type="email" id="email" name="email" required
                           class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 transition duration-200 ease-in-out text-gray-900 placeholder-gray-500"
                           placeholder="{% trans 'Ex: contact@votreentreprise.com' %}">
                </div>
                <div>
                    <label for="sujet" class="block text-gray-800 font-semibold mb-2">{% trans "Sujet de votre demande" %}</label>
                    <input type="text" id="sujet" name="sujet" required
                           class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 transition duration-200 ease-in-out text-gray-900 placeholder-gray-500"
                           placeholder="{% trans 'Ex: Demande de devis pour sécurité réseau' %}">
                </div>
                <div>
                    <label for="message" class="block text-gray-800 font-semibold mb-2">{% trans "Votre Message Détaillé" %}</label>
                    <textarea id="message" name="message" rows="6" required
                              class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 transition duration-200 ease-in-out text-gray-900 placeholder-gray-500"
                              placeholder="{% trans 'Décrivez votre besoin ou votre problème...' %}"></textarea>
                </div>
                <button type="submit"
                        class="w-full bg-blue-700 text-white font-bold py-3 rounded-md hover:bg-blue-800 transition-colors duration-300 transform hover:scale-105 shadow-md">
                    {% trans "Envoyer Votre Message" %}
                </button>
            </form>

            {# Contact Information #}
            <div class="space-y-8 text-gray-700">
                <div class="bg-gray-100 p-7 rounded-xl shadow-md">
                    <h3 class="text-2xl font-bold text-blue-700 mb-3">{% trans "Notre Adresse" %}</h3>
                    <p class="text-lg leading-relaxed">
                        06 BP 10811 Ouagadougou<br>
                        Burkina Faso<br>
                        Karpala-Secteur 51 <br>
                        {% trans "Côté est du CHU de Bogodogo" %}
                    </p>
                </div>
                <div class="bg-gray-100 p-7 rounded-xl shadow-md">
                    <h3 class="text-2xl font-bold text-blue-700 mb-3">{% trans "Contact Téléphonique" %}</h3>
                    <p class="text-lg mb-2"><i class="fas fa-phone-alt text-blue-600 mr-2"></i> +226 25 37 37 88</p>
                    <p class="text-lg mb-2"><i class="fab fa-whatsapp text-green-500 mr-2"></i> +226 73 12 22 22</p>
                    <p class="text-lg"><i class="fas fa-mobile-alt text-blue-600 mr-2"></i> +226 77 48 08 09</p>
                </div>
                <div class="bg-gray-100 p-7 rounded-xl shadow-md">
                    <h3 class="text-2xl font-bold text-blue-700 mb-3">{% trans "Adresse E-mail" %}</h3>
                    <p class="text-lg">
                        <i class="fas fa-envelope text-blue-600 mr-2"></i>
                        <a href="mailto:contact@tropicom.com" class="text-blue-700 hover:underline">contact@tropicom.com</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="mt-10 mb-10"> {# Added margin-bottom for better spacing #}
    <h2 class="sr-only">{% trans "Localisation de Tropicom sur Google Maps" %}</h2> {# Screen reader only title #}
    <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3876.544520869372!2d-1.464684085189745!3d12.355609491295982!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xe2ebc394c8e7e17%3A0xf69c4f69c4f69c4f!2sTropicom!5e0!3m2!1sen!2sbf!4v1678912345678!5m2!1sen!2sbf"
        width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"
        title="{% trans 'Carte de localisation de Tropicom' %}">
    </iframe>
</section>

<div id="notif-container" class="fixed bottom-5 left-5 z-50 space-y-4 pointer-events-none">
    <div class="notif hidden bg-white border border-blue-300 shadow-lg rounded-lg px-4 py-3 relative w-72 text-sm transform translate-x-[-100%] opacity-0">
        <button class="absolute top-2 right-2 text-gray-500 hover:text-red-600 p-1 rounded-full hover:bg-gray-100 transition" onclick="this.parentElement.remove()" aria-label="{% trans 'Fermer la notification' %}">×</button>
        <p class="font-bold text-blue-900 mb-2 text-base">{% trans "Besoin d'un VPN sécurisé ?" %}</p>
        <a href="https://wa.me/22673122222" target="_blank" rel="noopener noreferrer" class="inline-block bg-green-500 text-white text-xs px-3 py-1.5 rounded-full hover:bg-green-600 transition shadow">
            {% trans "Oui, contactez-nous" %}
        </a>
    </div>
    <div class="notif hidden bg-white border border-blue-300 shadow-lg rounded-lg px-4 py-3 relative w-72 text-sm transform translate-x-[-100%] opacity-0">
        <button class="absolute top-2 right-2 text-gray-500 hover:text-red-600 p-1 rounded-full hover:bg-gray-100 transition" onclick="this.parentElement.remove()" aria-label="{% trans 'Fermer la notification' %}">×</button>
        <p class="font-bold text-blue-900 mb-2 text-base">{% trans "Besoin d'un système d'alarme ?" %}</p>
        <a href="https://wa.me/22673122222" target="_blank" rel="noopener noreferrer" class="inline-block bg-green-500 text-white text-xs px-3 py-1.5 rounded-full hover:bg-green-600 transition shadow">
            {% trans "Oui, contactez-nous" %}
        </a>
    </div>
    <div class="notif hidden bg-white border border-blue-300 shadow-lg rounded-lg px-4 py-3 relative w-72 text-sm transform translate-x-[-100%] opacity-0">
        <button class="absolute top-2 right-2 text-gray-500 hover:text-red-600 p-1 rounded-full hover:bg-gray-100 transition" onclick="this.parentElement.remove()" aria-label="{% trans 'Fermer la notification' %}">×</button>
        <p class="font-bold text-blue-900 mb-2 text-base">{% trans "Besoin de conseil en communication ?" %}</p>
        <a href="https://wa.me/22673122222" target="_blank" rel="noopener noreferrer" class="inline-block bg-green-500 text-white text-xs px-3 py-1.5 rounded-full hover:bg-green-600 transition shadow">
            {% trans "Oui, contactez-nous" %}
        </a>
    </div>
    <div class="notif hidden bg-white border border-blue-300 shadow-lg rounded-lg px-4 py-3 relative w-72 text-sm transform translate-x-[-100%] opacity-0">
        <button class="absolute top-2 right-2 text-gray-500 hover:text-red-600 p-1 rounded-full hover:bg-gray-100 transition" onclick="this.parentElement.remove()" aria-label="{% trans 'Fermer la notification' %}">×</button>
        <p class="font-bold text-blue-900 mb-2 text-base">{% trans "Besoin d'un site Web professionnel ?" %}</p>
        <a href="https://wa.me/22673122222" target="_blank" rel="noopener noreferrer" class="inline-block bg-green-500 text-white text-xs px-3 py-1.5 rounded-full hover:bg-green-600 transition shadow">
            {% trans "Oui, contactez-nous" %}
        </a>
    </div>
    <div class="notif hidden bg-white border border-blue-300 shadow-lg rounded-lg px-4 py-3 relative w-72 text-sm transform translate-x-[-100%] opacity-0">
        <button class="absolute top-2 right-2 text-gray-500 hover:text-red-600 p-1 rounded-full hover:bg-gray-100 transition" onclick="this.parentElement.remove()" aria-label="{% trans 'Fermer la notification' %}">×</button>
        <p class="font-bold text-blue-900 mb-2 text-base">{% trans "Besoin d'installation Réseau ?" %}</p>
        <a href="https://wa.me/22673122222" target="_blank" rel="noopener noreferrer" class="inline-block bg-green-500 text-white text-xs px-3 py-1.5 rounded-full hover:bg-green-600 transition shadow">
            {% trans "Oui, contactez-nous" %}
        </a>
    </div>
</div>

<style>
    /* Keyframe for slide-in animation from left */
    @keyframes slideInLeft {
        from {
            transform: translateX(-100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    /* Keyframe for slide-out animation to left */
    @keyframes slideOutLeft {
        from {
            transform: translateX(0);
            opacity: 1;
        }
        to {
            transform: translateX(-100%);
            opacity: 0;
        }
    }

    .notif.animate-slide-in {
        animation: slideInLeft 0.5s ease-out forwards;
    }

    .notif.animate-slide-out {
        animation: slideOutLeft 0.5s ease-in forwards;
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const notifs = document.querySelectorAll("#notif-container .notif");
        let delay = 0;
        const displayDuration = 8000; // 8 seconds
        const intervalBetweenNotifs = 9000; // 9 seconds to show the next one after the previous one finishes its display duration

        function showNotif(index) {
            if (index >= notifs.length) {
                index = 0; // Loop back to the first notification
            }

            const currentNotif = notifs[index];
            currentNotif.classList.remove("hidden", "animate-slide-out");
            currentNotif.classList.add("animate-slide-in");
            currentNotif.style.pointerEvents = 'auto'; // Enable interactions for the current notif

            // Set timeout for disappearance
            setTimeout(() => {
                currentNotif.classList.remove("animate-slide-in");
                currentNotif.classList.add("animate-slide-out");
                currentNotif.style.pointerEvents = 'none'; // Disable interactions during exit animation

                currentNotif.addEventListener('animationend', function handler() {
                    currentNotif.classList.add("hidden");
                    currentNotif.removeEventListener('animationend', handler); // Remove listener to prevent multiple calls
                });
            }, displayDuration);

            // Schedule the next notification
            setTimeout(() => {
                showNotif(index + 1);
            }, intervalBetweenNotifs);
        }

        // Start the cycle after a small initial delay
        if (notifs.length > 0) {
            setTimeout(() => {
                showNotif(0);
            }, 1000); // Initial delay before the first notification appears
        }
    });

    // Dummy script for Feather Icons (replace with actual Feather setup if used)
    // <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    // <script>
    //   feather.replace()
    // </script>
</script>

{% endblock %}